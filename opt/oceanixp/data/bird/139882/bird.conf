router id 10.10.1.10;

log "/var/log/bird.log" all;
log syslog all;
debug protocols all;

protocol device { }

# Routes originated by the local instance of
# BIRD for this client.
protocol static own_prefixes {
    # OK.
    route 193.0.0.0/21 reject;

    # RPKI INVALID.
    route 193.0.0.1/32 reject;

    # IX peering LAN + bogon.
    route 10.0.0.0/24 reject;
    route 192.168.0.0/24 reject;

    # OK, do not announce to AS10745.
    route 193.0.22.0/23 reject;

    # Not in AS-SET.
    route 202.12.29.0/24 reject;
}

# Policy applied to the session towards the
# route server. Routes "manipulation" can
# happen here to simulate weird announcements.
filter to_rs {
    accept;
}

filter from_rs {
    accept;
}

protocol bgp the_rs {
    local as 139882;
    neighbor 10.10.1.2 as 139882;
    next hop self;
    import filter from_rs;
    export filter to_rs;
    connect delay time 1;
    connect retry time 1;
}
